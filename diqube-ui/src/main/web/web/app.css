/**
 * diqube: Distributed Query Base.
 *
 * Copyright (C) 2015 Bastian Gloeckle
 *
 * This file is part of diqube.
 *
 * diqube is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
/* app css stylesheet */
body {
	padding-top: 50px;
}

/* ============= Single query ============= */

textarea.diql-full {
	width: 100%;
}

.execute-buttons {
	margin-bottom: 20px;
}

/* ============= Create analysis ============= */

.create-analysis .has-feedback label~.form-control-feedback {
  top: 35px !important;
}

/* ============= UI analysis containers ============= */

.analysis-container {
  display: flex;
}

.qube-container {
  flex-grow: 1;
}

.query-container {
  display: flex;
  flex-wrap: wrap;
}

.slice-container {
	min-width: 300px;
}

/* ============= Qube ============= */

.add-qube-btn {
  margin-bottom: 30px;
}

.qube {
	background-color: #BBBBBB;
	padding: 5px;
	border-radius: 4px;
}

.qube .qube-header {
	display: flex;
	justify-content: space-between;
}

.qube .qube-header-left {
	font-size: 18px;
}

.qube .qube-action-list {
	flex-grow: 1;
	display: flex;
	justify-content: flex-end;
  padding-right: 5px;
}

.qube .qube-header .qube-action {
  display: flex;
  align-items: center;
  margin-left: 10px;
}

.qube .qube-header .edit-qube {
	flex-grow: 1;
	align-items: center;
	display: flex;
}

.qube .qube-header .edit-qube .simple-form {
	flex-grow: 1;
	display: flex;
	justify-content: space-between;
}

.qube .qube-action-list .qube-action {
  margin-right: 5px;
}

.qube .edit-qube .qube-action-list select {
  width: auto;
}

.qube .qube-header .edit-qube .form-group {
  margin-bottom: 0px;
}

.qube .qube-header .edit-qube .has-feedback span.form-control-feedback {
  top: 10px !important;
}

.qube-row {
  margin-bottom: 15px;
}

.qube .remove-qube {
  display:flex;
  flex-direction: column;
}

.qube .remove-qube > *:not(.qube-header) {
  display:flex;
  justify-content: center;
  font-weight: bold;
}

.qube .remove-qube button {
  margin-left: 10px;
}


/* ============= Query ============= */

.query {
	background-color: white;
	margin-left: 10px;
	margin-top: 10px;
	padding: 5px;
	border-radius: 4px;
}

.query .alert {
  margin-bottom: 0px;
  /* Alert may contain column names which may be very long. Ensure that they are broken if too long. */
  word-break: break-word;
  word-wrap:break-word;
}

.query .progress {
	flex-grow: 1;
  margin-bottom: 0px;
  margin-left: 5px;
}

.query .query-header {
  display: flex;
  margin-bottom: 5px;
}
.query .query-header-actions {
  flex-grow: 1;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-left: 15px;
}

.query .query-header-action {
	margin-right: 10px;
}

.query .edit-query {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.query .edit-query .alert {
	width: 0;
	min-width: 100%;
}

.query .edit-query .form-group {
  margin-bottom: 0px;
}

.query .edit-query textarea.query-diql {
  resize: both;
  white-space: nowrap;
  flex-grow: 1;
}

.query .alert {
	margin-top: 5px;
}

/* query table */
.query .table {
  margin-bottom: 0px;
}

.query .edit-query .has-feedback span.form-control-feedback {
  top: 10px !important;
}

.query .no-rows-returned {
	font-weight: bold;
	text-align: center;
}

.query.remove-query {
	display:flex;
	flex-direction: column;
}

.query.remove-query > *:not(.query-header) {
  display:flex;
  justify-content: center;
  font-weight: bold;
}

.query.remove-query button {
  margin-left: 10px;
}


/* ============= Slice display ============= */

.slice-container > div > div.panel-heading {
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.slice-container .slice-container-heading-item {
	margin-left: 5px;
	margin-right: 5px;
}


/* heading color of slice panel different than of surrounding panel */
.slice div.panel-heading {
	background-color: #cfcfcf;
}

.slice {
	margin-bottom: 0px;
}

.slices .first-slice {
  border-radius: 0px;
  border-top-right-radius: 4px;
  border-top-left-radius: 4px;
}

.slices .middle-slice {
	border-radius: 0px;
	margin-top: -1px;
}

.slices .middle-slice .panel-heading {
	border-top-left-radius: 0px;
	border-top-right-radius: 0px;
}

.slices .last-slice {
  border-radius: 0px;
  border-bottom-right-radius: 4px;
  border-bottom-left-radius: 4px;
  margin-top: -1px;
}

.slices .last-slice .panel-heading {
  border-top-left-radius: 0px;
  border-top-right-radius: 0px;
}

.slices .slice .panel-heading {
	display: flex;
	justify-content: space-between;
  align-items: center;
}

.slices .edit-slice .has-feedback span.form-control-feedback {
  top: 10px !important;
}

.slices .edit-slice .form-group {
  margin-bottom: 0px;
  flex-grow: 1;
}

.slices .edit-slice .slice-header-actions {
  margin-left: 5px;
}

.slices .slice-header-actions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-left: 15px;
}

.slices .slice-header-action {
  margin-left: 10px;
}

.slices .slice .panel-body .alert {
  margin-bottom: 0px;
}

.slices .slice .panel-body {
	/* body is only used when an alert is displayed */
  padding: 2px;
}

.slices .slice .table {
  margin-bottom: 0px;
}

.slices .slice .table .slice-disjunction-value-td {
	padding: 0px;
}

.slices .slice .table .slice-disjunction-value-list {
  margin-bottom: 0px;
}

.slices .slice .table .slice-disjunction-value-first {
  border: 0px;
}

.slices .slice .table .slice-disjunction-value:not(.slice-disjunction-value-first) {
  border-left: 0px;
  border-right: 0px;
  border-bottom: 0px;
}

.slices .slice .table .slice-disjunction-value {
	/* adjust padding of list-group as the surroundinbg table is condensed */
	padding-top: 5px;
	padding-bottom: 5px;
}

.slices .slice .table tr.slice-tr-show-and::before {
	content: "and";
	position: absolute;
	margin-top: -7px;
	margin-left: 3px;
	background-color: white;
	font-size: x-small;
  font-style: italic;
  color: #999;
}

/* we need to add a "before" for the tr's that should not have a "and", too, otherwise the layout gets messed up */
.slices .slice .table tr:not(.slice-tr-show-and)::before {
  content: "";
  position: absolute;
  margin-top: -7px;
  margin-left: 3px;
  background-color: white;
  font-size: x-small;
  font-style: italic;
  color: #999;
}


.slices .slice .table .slice-disjunction-value.slice-disjunction-value-show-or::before {
	content: "or";
  position: absolute;
  margin-top: -13px;
  margin-left: -11px;
  background-color: white;
  font-size: x-small;
  font-style: italic;
  color: #999;
}

.slices .slice-disjunction-field {
  /* If text gets too long, break it! */
  word-wrap:break-word;
  word-break: break-word;
}

.slices .edit-slice .slice-value-group {
	display: flex;
}

.slices .edit-slice .slice-value-group .form-control-feedback {
  right: 20px;
}

.slices .edit-slice .slice-value-group .slice-value-group-actions {
  margin-left: 5px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.slices .edit-slice .slice-disjunction-actions {
  margin-left: 5px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.slices .edit-slice .slice-disjunction-field {
  display: flex;
  justify-content: flex-start;
}

.slices .edit-slice .slice-disjunction-field span {
	/* If text gets too long, break it! */
	word-wrap:break-word;
  word-break: break-word;
}

.slices .edit-slice .slice-add-field-td {
	display: flex;
	align-items: center;
}

.slices .edit-slice .slice-add-field-td input {
  width: 50%;
}

/* in edit moe the list-group is not direct parent of the panel, therefore we need to manually adjust the layout to not have additional borders etc. */
.slices .edit-slice form>.list-group {
  margin-bottom: 0px;
}

.slices .edit-slice form>.list-group .list-group-item {
  border-top-width: 0px;
  border-width: 0px 0;
  border-radius: 0;
}

.slices .slice .table .slice-disjunction-value-td .slice-edit-value {
	/* Ensure there's always enough space to type the value. */
  min-width: 300px;
}


.slice.remove-slice .panel-body {
  display:flex;
  flex-direction: column;
}

.slice.remove-slice .panel-body > *:not(.alert) {
  display:flex;
  justify-content: center;
  font-weight: bold;
}

.slice.remove-slice .panel-body button {
  margin-left: 10px;
}


/* ============= General ============= */

.remove-action {
	color: #d9534f;
}

.add-action {
	
}

.diqube-drag-control {
	font-size: small;
	color: #333;
  border-radius: 4px;
  background: #6895b4; 
  spacing: 2px;
}
