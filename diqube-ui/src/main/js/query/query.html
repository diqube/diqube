<!--

    diqube: Distributed Query Base.

    Copyright (C) 2015 Bastian Gloeckle

    This file is part of diqube.

    diqube is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->
<h1 class="page-header">Query</h1>

<span class="text-muted">Execute a single query.</span>

<p><textarea ng-model="query.diql" rows="3" class="diql-full"> </textarea></p>
<p><button class="btn btn-primary" ng-click="query.execute()">Execute</button></p>

<table style="visibility: {{ query.result ? 'visible' : 'hidden'}}" class="table table-striped">
  <thead>
    <tr>
      <th ng-repeat="colName in query.result.columnNames">{{colName}}</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="row in query.result.rows">
      <td ng-repeat="col in row">{{col}}</td>
    </tr>
  </tbody>
</table>

<div style="visibility: {{ query.exception ? 'visible' : 'hidden'}}" class="alert alert-danger">
  <span class="glyphicon glyphicon-exclamation-sign"></span>
  {{ query.exception }}
</div>